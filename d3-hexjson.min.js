!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],r):r(e.d3=e.d3||{},e.d3)}(this,function(e,r){"use strict";function n(e,n,a){var o=e.layout,i=[],d=0;Object.keys(e.hexes).forEach(function(r){e.hexes[r].key=r,i.push(e.hexes[r])});var h=r.max(i,function(e){return+e.q}),f=r.min(i,function(e){return+e.q}),x=r.max(i,function(e){return+e.r}),y=r.min(i,function(e){return+e.r}),p=h-f+1,q=x-y+1;d="odd-r"===o||"even-r"===o?r.min([n/((p+.5)*Math.sqrt(3)),a/(1.5*(q+1/3))]):r.min([a/((q+.5)*Math.sqrt(3)),n/(1.5*(p+1/3))]);var v=d*Math.sqrt(3),b=s(o,v,d),m=u(b);return i.forEach(function(e){e.qc=e.q-f,e.rc=x-e.r,e.x=t(e,o,v,d),e.y=c(e,o,v,d),e.vertices=b,e.points=m}),i}function t(e,r,n,t){var c=0,s=0;switch(r){case"odd-r":s=e.rc%2==1?n:n/2,c=e.qc*n+s;break;case"even-r":s=e.rc%2==0?n:n/2,c=e.qc*n+s;break;case"odd-q":case"even-q":c=e.qc*t*1.5+t}return c}function c(e,r,n,t){var c=0,s=0;switch(r){case"odd-r":case"even-r":c=e.rc*t*1.5+t;break;case"odd-q":s=e.qc%2==1?n:n/2,c=e.rc*n+s;break;case"even-q":s=e.qc%2==0?n:n/2,c=e.rc*n+s}return c}function s(e,r,n){var t=[];switch(e){case"odd-r":case"even-r":t.push({x:0,y:0-n}),t.push({x:0+.5*r,y:0-.5*n}),t.push({x:0+.5*r,y:0+.5*n}),t.push({x:0,y:0+n}),t.push({x:0-.5*r,y:0+.5*n}),t.push({x:0-.5*r,y:0-.5*n});break;case"odd-q":case"even-q":t.push({x:0-n,y:0}),t.push({x:0-.5*n,y:0-.5*r}),t.push({x:0+.5*n,y:0-.5*r}),t.push({x:0+n,y:0}),t.push({x:0+.5*n,y:0+.5*r}),t.push({x:0-.5*n,y:0+.5*r})}return t}function u(e){var r="";return e.forEach(function(e){r+=e.x+","+e.y+" "}),r.substring(0,r.length-1)}e.renderHexJSON=n,Object.defineProperty(e,"__esModule",{value:!0})});